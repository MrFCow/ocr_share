(this.webpackJsonpocr_share=this.webpackJsonpocr_share||[]).push([[0],{72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),s=n.n(c),l=n(2),o=n.n(l),i=n(14),u=n(16),m=n(4),d=n(30),h=n(9),g=n(29),b=Object(h.a)({root:{width:320,height:320,display:"flex",justifyContent:"center",alignItems:"center"},box:{backgroundColor:"rgba(0,155,0,0.5)"},resultSpan:{marginTop:5}}),f=Object(g.createWorker)({logger:function(e){return console.log(e)}});function p(e){var t=b(),n=Object(a.useState)({startX:0,startY:0,endX:0,endY:0}),c=Object(m.a)(n,2),s=c[0],l=c[1],h=Object(a.useState)(!1),g=Object(m.a)(h,2),p=g[0],j=g[1],v=Object(a.useState)(null),O=Object(m.a)(v,2),E=O[0],x=O[1],C=Object(d.a)((function(e){e.down;var t=Object(m.a)(e.movement,2),n=t[0],a=t[1],r=Object(m.a)(e.offset,2),c=(r[0],r[1],Object(m.a)(e.initial,2)),o=c[0],i=c[1];l(Object(u.a)(Object(u.a)({},s),{},{startX:o,startY:i,endX:o+n,endY:i+a})),x(null)}),{delay:!0}),w=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,f.load();case 3:return e.next=5,f.loadLanguage("eng");case 5:return e.next=7,f.initialize("eng");case 7:return e.next=9,f.recognize(t,{rectangle:{top:Math.min(n.startY,n.endY),left:Math.min(n.startX,n.endX),width:Math.abs(n.endX-n.startX),height:Math.abs(n.endY-n.startY)}});case 9:return a=e.sent,r=a.data.text,j(!1),console.log("OCR text: ".concat(r)),x(r),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:t.root},C(),{style:{touchAction:"none"}}),(s.startX-s.endX)*(s.startY-s.endY)>0?r.a.createElement("div",{className:t.box,style:{position:"fixed",width:Math.abs(s.startX-s.endX),height:Math.abs(s.startY-s.endY),left:Math.min(s.startX,s.endX),top:Math.min(s.startY,s.endY)},onClick:function(t){e.img?w(e.img,s):console.log("image not available")}}):null),p?r.a.createElement("span",{className:t.resultSpan},"Detecting..."):E?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:t.resultSpan},"Detected Text: ",E,r.a.createElement("button",{onClick:function(e){Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({text:E});case 3:console.log("Data was shared successfully"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Share failed:",e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},"Share"))):r.a.createElement("span",{className:t.resultSpan},"No Detected Text!"))}var j=n(31),v=n.n(j),O=Object(h.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},span:{marginTop:30}}),E={width:320,height:320,facingMode:"environment"};function x(e){var t=O(),n=Object(a.useState)(null),c=Object(m.a)(n,2),s=c[0],l=c[1],o=Object(a.useRef)(null),i=Object(a.useCallback)((function(){var e=o.current.getScreenshot();l(e)}),[o]);return r.a.createElement("div",{className:t.root},s?r.a.createElement("div",{style:{width:320,height:320,background:"url(".concat(s,")")}},r.a.cloneElement(e.children,{img:s})):r.a.createElement(v.a,{audio:!1,height:320,ref:o,screenshotFormat:"image/jpeg",width:320,videoConstraints:E}),r.a.createElement("span",{className:t.span},r.a.createElement("button",{onClick:i},"Capture photo"),r.a.createElement("button",{onClick:function(){return l(null)}},"Clear")))}var C=function(){return r.a.createElement(x,null,r.a.createElement(p,null))},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),w()}},[[72,1,2]]]);
//# sourceMappingURL=main.1fae3136.chunk.js.map